\documentclass{utap}

\usepackage{multicol}
\usepackage{verbatim}
\usepackage{fancyvrb}
\usepackage{lscape}
\usepackage{rotating}
\usepackage{xepersian}

\graphicspath{{./img/}}

\title{تمرین شماره‌ی ۷\normalsize\qquad فاز سوم}
\author{%
        \href{mailto:farzadhabibii98@gmail.com?subject=[AP\%20S98\%20A7]\%20}{فرزاد حبیبی},
        \href{mailto:naghavi.pooya@gmail.com?subject=[AP\%20S98\%20A7]\%20}{پویا نقوی},
    \href{mailto:zangenehsaeed412@gmail.com?subject=[AP\%20S98\%20A7]\%20}{سعید زنگنه},
        \href{mailto:ahhabibvand@gmail.com?subject=[AP\%20S98\%20A7]\%20}{امیرحسین حبیب‌وند},
    \href{mailto:bardia.eghbali@gmail.com?subject=[AP\%20S98\%20A7]\%20}{بردیا اقبالی}%
}
\course{برنامه‌سازی پیشرفته}
\lecturer{رامتین خسروی}
\deadline{سه‌شنبه ۱۴ خرداد ۱۳۹۸، ساعت ۲۳:۵۵}

\newcommand{\commandFormat}[2]
{
    \linespread{1.6}
    \begin{latin}
        \centering
        \begin{minipage}[t]{1\textwidth}
            \scriptsize
            {\VerbatimInput[frame=lines,label={\rl{دستور ورودی}}]{#1}}
            {\VerbatimInput[frame=lines,label={\rl{خروجی}}]{#2}}
        \end{minipage}
    \end{latin}
}

\newcommand{\outputOnly}[2]
{
    \linespread{1.6}
    \begin{latin}
        \centering
        \begin{minipage}[t]{1\textwidth}
            \scriptsize
            {\VerbatimInput[frame=lines,label={\rl{خروجی}}]{#1}}
        \end{minipage}
    \end{latin}
}

\begin{document}
    \maketitle
    \section*{مقدمه}

        شما در فاز‌های قبلی این پروژه به پیاده‌سازی یک شبکه‌ی مجازی پرداختید و به صورت کامل منطق دامنه‌ی\LTRfootnote{domain logic} آن را پیاده‌سازی کردید.
        هدف از این فاز پیاده‌سازی یک واسط کاربری\LTRfootnote{user interface} برای فاز‌های قبلی است. این پیاده‌سازی بر روی بستر وب و مبتنی بر مدل مشتری-سرویس‌دهنده\LTRfootnote{client-server} صورت می‌گیرد.
        برای سهولت، کتابخانه‌ای تحت عنوان \href{https://github.com/UTAP/APHTTP}{\lr{APHTTP}} برای پیاده‌سازی وب‌سرور در اختیار شما قرار گرفته‌است.
    
    
    \section*{مشتری-سرویس‌دهنده}
            مدل مشتری‌-‌سرویس‌دهنده یک ساختار توزیع‌شده\LTRfootnote{distributed} برای طراحی نرم‌افزار است که در آن نرم‌افزار به چند بخش مجزا تقسیم می‌شود. یکی از این بخش‌ها سرویس‌دهنده نام داردکه وظیفه‌ی فراهم‌کردن منابع یا خدمت‌ها\LTRfootnote{services} را بر عهده می‌گیرد. بخش دیگر که مشتری نام دارد منبع یا سرویس مورد نیاز خود را از سرویس‌دهنده درخواست می‌کند؛ برای مثال وب‌سایت \lr{CECM} از یک وب‌سرور تشکیل شده وکاربران با استفاده از مرورگر\LTRfootnote{web browser} خود به آن متصل شده و درخواست‌های خود را به آن می‌فرستند. صفحاتی که پس از واردکردن آدرس
    \url{http://cecm.ut.ac.ir} 
     در مرورگر مشاهده می‌شود، جوابی است که از سمت سرویس‌دهنده در پاسخ به درخواست کاربر فرستاده شده است.


    \section{شرح تمرین}

        در این فاز شما به پیادەسازی یک وب سرور بر پایه‌ی پروتکل
        \lr{HTTP}\LTRfootnote{\href{https://developer.mozilla.org/en-US/docs/Web/HTTP}{Hypertext Transfer Protocol}}
        برای برنامه‌ی خود که در فازهای قبل پیادەسازی کردەاید می‌پردازید. مرورگر نیز نقش مشتری\LTRfootnote{client} را ایفا می‌کند. پروتکل \lr{HTTP} از تعدادی \lr{method} پشتیبانی می‌کند که هدف آن‌ها توصیف عملکرد درخواستی از سرور است. دو \lr{method} ارتباطی مهم در این پروتکل عبارتند از \lr{\texttt{GET}} و \lr{\texttt{POST}} که به‌ترتیب برای درخواست و ارسال اطلاعات استفاده می‌شوند. همچنین پارامتر‌های پرسمان\LTRfootnote{query params} و بدنه‌ی\LTRfootnote{‌body} درخواست برای مشخص~کردن اطلاعات ارسال‌شده از سمت سرویس‌دهنده مورد استفاده قرار می‌گیرند که هر کدام یک نام و مقدار دارند. 
        
        در این فاز لازم است وب‌سرور شما برخی از دستورهایی را که در فازها قبلی پیادەسازی کردەاید پشتیبانی کند. همچنین باید برای هر یک از این عملیات رابط کاربری مخصوص به آن را با استفاده از زبانِ نشانه‌گذاری\LTRfootnote{markup language} \lr{HTML} پیادەسازی کنید.

    \section{آن‌چه‌ شما باید پیاده‌سازی کنید}
    
در ادامه قابلیت‌هایی که برنامه‌ی شما باید داشته باشد به‌تفصیل توضیح داده خواهد شد. شما باید بر اساس هر یک از این قابلیت‌ها یک صفحه برای واسط کاربری آن پیاده سازی کنید و با استفاده از کدی که در فازهای قبل زدەاید، منطق آن را کنترل نمایید.
    
    \subsection{صفحه‌ی ثبت‌نام}
    
    در این صفحه افراد می‌توانند در شبکه‌ی مجازی ثبت‌نام کنند.توجه کنید که هر کاربر دارای یک شناسه‌ی عددی یکتا است که این شناسه از عدد یک شروع می‌شود. این شناسه به طور خودکار در هنگام ثبت‌نام کاربر به آن تعلق می‌گیرد.  
    
    در صفحه‌ی ثبت‌نام اطلاعات زیر از کاربر گرفته می‌شود‌:‌
    \begin{multicols}{3}
    \begin{enumerate}[noitemsep,nosep]
        \item نام ‌کاربری
        \item رمز عبور و تکرار رمز عبور
        \item سن
        \item ایمیل
        \item ناشر بودن یا نبودن
    \end{enumerate}
    \end{multicols}
    
    اگر نام کاربری در سیستم موجود باشد باید متناسب با آن پیغام مناسبی در صفحه‌ی مرورگر به کاربر نشان داده شود.
    
        
    \subsection{صفحه‌ی ورود}
    کاربر در این صفحه می‌تواند با واردکردن نام‌کاربری و گذرواژەی خود وارد سیستم شود. 
    
    هر درخواستی که از سمت کلاینت به سرور ارسال می‌شود، با توجه به اینکه کدام کاربر آن را ارسال کرده است، جواب متفاوتی به همراه دارد. برای همین نیاز است تا مشخص شود که درخواست ارسال شده متعلق به چه کاربری است. برای انجام این کار پس از وارد شدن نام‌ کاربری و گذرواژه توسط کاربر و ارسال آن به سرور، در صورتی که این اطلاعات درست باشند، سرور شناسه‌ی یکتای مربوط به کاربر را با عنوان \lr{sessionId} تولید کرده و آن را به کلاینت ارسال می‌کند. از این پس سرور با بررسی \lr{sessionId} هر درخواست و مشخص کردن نام کاربری متناظر با آن، متوجه می‌شود که این درخواست متعلق به کدام کاربر است و با توجه به آن به درخواست رسیدگی می‌کند.
    
    توجه کنید که کتابخانه‌ی
    \lr{APTHTTP}
    توانایی مدیریت
    \lr{sessionId}ها
    را دارد. برای اطلاعات بیشتر می‌توانید به بخش
    \href{https://github.com/UTAP/APHTTP/wiki/Session}{\lr{Session}}
    در ویکی کتابخانه مراجعه کنید. 
    
    بعد از ورود کاربر به صفحه‌ی خانه هدایت می‌شود.

    
    \subsection{خروج}
    پس از ورود، باید یک دکمه برای خروج در همه‌ی صفحات وجود داشته باشد که به کمک آن، کاربر می‌تواند از سیستم خارج شود. پس از خروج، کاربر باید به صفحه‌ی ورود منتقل شود.
    
    
    
    \subsection{ناشران}
    صفحات قبل برای آن بود که کاربر‌ها بتوانند به منظور استفاده از امکانات به سامانه‌ وارد شوند. هر نوع از کاربران قابلیت‌های خاص خود  را دارند که از این پس قابلیت‌های آن‌ها را در قالب دستورهایی بیان می‌کنیم.
    
        اگر کاربری به سامانه وارد نشده باشد یا سرویسی از سرور را صدا بزند که مربوط به نوع کاربری او نیست باید خطای مناسب به او نشان داده شود.
        
        \subsubsection{صفحه‌ی خانه} 
        ناشر با اولین بار ورود به این صفحه می‌تواند لیست تمامی فیلم‌هایی که تا به حال ثبت کرده است را مشاهده کند. همین‌طور ناشر در این صفحه می‌تواند در صورت تمایل لیست‌ فیلم‌ها را بر اساس نام کارگردان با وارد کردن آن \textbf{فیلتر} کند. 
        
        
        ناشر می‌تواند با کلیک بر روی دکمه‌ی \textbf{حذف} مربوط به هر کدام از فیلم‌ها آن فیلم را حذف کند. 
        همین‌طور در این صفحه یک لینک برای رفتن به صفحه‌ی ثبت فیلم جدید وجود دارد.
        
        اطلاعاتی که باید برای هر کدام از فیلم‌ها نمایش داده شوند به شرح زیر است:‌
        \begin{multicols}{3}
        \begin{itemize}[noitemsep,nosep]
            \item نام 
            \item طول زمان  
            \item قیمت 
            \item امتیاز 
            \item سال ساخت
            \item نام کارگردان
        \end{itemize}
        \end{multicols}
        
        
         \subsubsection{صفحه‌ی ثبت فیلم}
    در این صفحه ناشر اطلاعات یک فیلم جدید را وارد کرده و آن را به شبکه اضافه می‌کند. 
    
    برای ثبت فیلم اطلاعات زیر وارد می‌شوند:
        \begin{multicols}{3}
        \begin{itemize}[noitemsep,nosep]
            \item نام 
            \item طول زمان  
            \item قیمت 
            \item امتیاز 
            \item سال ساخت
            \item نام کارگردان
            \item خلاصه‌\LTRfootnote{summary}
        \end{itemize}
        \end{multicols}
        
    
    \subsection{مشتریان}
    تا این جا با قابلیت‌هایی که تنها ناشر می‌تواند انجام دهد، آشنا شدیم.
    از این پس با قابلیت‌های مشتری‌ها آشنا می‌شویم.
    
    توجه کنید که هر ناشر برای فیلم‌های دیگر می‌تواند در نقش یک مشتری باشد.
    یعنی تمام قابلیت‌های مشتری را نیز علاوه بر قابلیت‌های ناشر داراست.
    
    
    
        \subsubsection{صفحه‌ی خانه}
    
    این صفحه مشابه صفحه‌ی خانه‌ی ناشر است و تنها تفاوت آن عدم توانایی حذف یا اضافه کردن فیلم توسط مشتری است. 
    
        \subsubsection{صفحه‌ی پروفایل}

        در این صفحه مشتری می‌تواند لیست فیلم‌هایی را که خریداری کرده است مشاهده کند. همین‌طور مشتری می‌تواند در این صفحه اعتبار حساب خود را شارژ کند. 
        
        اطلاعاتی که در این لیست برای هر کدام از فیلم‌ها وجود دارد همان اطلاعاتی‌ است که در صفحه‌ی خانه توسط مشتری‌ها قابل مشاهده است.

    
        \subsubsection{صفحه‌ی مشاهده‌ی جزئیات فیلم }
        
        هر مشتری می‌تواند با ورود به این صفحه جزئیات یک فیلم را مشاهده کند. 
        
        در  انتهای این قسمت ۴ فیلم از میان فیلم‌های شبکه، پس از نمایش جزئیات فیلم مذکور به نمایش در می‌آید. 
    با کلیک بر روی هر کدام از این فیلم‌ها مشتری به صفحه‌ی جزئیات آن فیلم هدایت می‌شود. 
        
        مشتری می‌تواند در این صفحه در صورتی که توان خرید فیلم را داشت آن‌ را خریداری کند. 
        
        هر مشتری می‌تواند پس از آن‌ که فیلمی را خرید، به آن بین ۱ تا ۱۰ امتیاز دهد. 
        
        جزئیات یک فیلم شامل اطلاعات زیر است: 
        
        \begin{multicols}{3}
        \begin{itemize}
            \item نام 
            \item طول زمان  
            \item قیمت 
            \item امتیاز 
            \item سال ساخت
            \item نام کارگردان
            \item خلاصه‌
        \end{itemize}
        \end{multicols}
    
        
        برای فیلم‌های پیشنهاد شده نیز باید اطلاعات زیر حتماً نشان داده شوند:
        
        \begin{multicols}{3}
            \begin{itemize}
                \item نام
                \item طول زمان
                \item نام کارگردان
            \end{itemize}
        \end{multicols}
    
    
    
    
    
    
    \section{بخش امتیازی}
    	\subsection{نظر‌ها}
    	بعد از خریداری فیلم، مشتری می‌تواند در  
    	\textbf{صفحه‌ی مشاهده‌ی جزئیات فیلم}
    	به فیلم نظر بدهد. 
    	
    	همچنین در این صفحه پس از جزئیات باید نظرهایی را که برای آن فیلم گذاشته شده نمایش داده شود. دقت کنید که در این فاز تنها نظر‌های یک فیلم پیاده‌سازی می‌شوند و پاسخ به نظر‌ها نیاز به پیاده‌سازی ندارد.
    	
    	     برای هر کدام از نظر‌های فیلم کافیست که پیام آن نظر‌ نمایش داده شود.
    	
        \subsection{\lr{CSS}}
    زبان نشانه‌گذاریِ 
\lr{CSS}\LTRfootnote{Cascading Style-Sheet}
 یک راه برای تغییر ظاهر صفحه‌هایی است که از \lr{HTML} بهره می‌برند. استفاده از این زبان علاوه بر این که می‌تواند ظاهر برنامه‌ی شما را بهتر کند برایتان نمره‌ی امتیازی هم به همراه دارد.
 
 همینطور کتابخانه‌های آماده‌ای از این زبان مثل
  \lr{\href{https://getbootstrap.com}{Bootstrap}}
  و
  \lr{\href{https://www.muicss.com}{MUI}}
  وجود دارند که می‌توانید برای راحتی کار از آن‌ها استفاده کنید. 
 
 
 
 
    \section{نکات پایانی}
        \begin{itemize}
            \item  اطلاعاتی که باید در هر کدام از صفحات نمایش دهید همان اطلاعاتی است که در فاز‌های قبلی پیاده‌سازی کرده‌ و در رابط کاربری خط فرمان نشان می‌دادید. 
            \item  
            استفاده از فریم‌ورک‌های دیگر به جز
                \lr{APHTTP} 
                نظیر 
                \lr{NodeJs, ReactJs, AngularJs} 
                و\dots{} غیر مجاز است.
                
            \item 
            توجه کنید که صفحاتی که پیادەسازی می‌کنید باید کاربری‌های گفته شده را داشته باشند اما طراحی و جزئیات هر صفحه به عهدەی خود شماست؛ برای مثال، می‌تواند برای جابه‌جایی بین صفحات از نوار ناوبری
            \LTRfootnote{\href{https://www.w3schools.com/css/css_navbar.asp}{Navbar}}
            یا هر روش دیگری استفاده کنید. 
    	\end{itemize}

    \section{نحوه‌ی تحویل}
        پرونده‌‌های مربوط به برنامه‌ی خود را در پوشه‌ای با نام \lr{\path{A7-3-SID.zip}} در صفحه‌ی \lr{CECM} درس بارگذاری کنید که \lr{SID} شماره‌ی دانشجویی شماست؛ برای مثال اگر شماره‌ی دانشجویی شما ۸۱۰۱۹۷۹۹۹ باشد، نام پوشه‌ی شما باید \lr{\path{A7-3-810197999.zip}} باشد.
        \begin{itemize}
            \item
                        برنامه‌ی شما باید در سیستم‌عامل لینوکس و با مترجم \lr{g++} با استاندارد \lr{\texttt{c++11}} ترجمه و اجرا شود.
                    \item
                        برنامه‌ی شما باید حتما طراحی شیءگرا داشته باشد. همچنین باید به صورت \lr{Multifile} باشد و استفاده از \lr{Makefile} در این تمرین اجباری است.
            \item 
            در صورتی که از \lr{git} استفاده می‌کنید، کد‌های خود را در مخزنی
             \LTRfootnote{repository}
             که قبلاً در سایت
             \lr{GitHub}\LTRfootnote{\href{www.github.com}{github.com}} 
             ساخته‌اید \lr{push} کنید و آدرس مخزن خود را در 
            \href{https://cecm.ut.ac.ir/mod/assign/view.php?id=83793}{بخش مربوط}
              در صفحه‌ی درس بنویسید.
            دقت کنید که شما باید تنها یک مخزن برای همه‌ی فازهای پروژه داشته باشید.
            همچنین، دقت کنید که علاوه بر \lr{GitHub} باید کدهای مربوط به هر فاز پروژه را در محل مربوط به آن فاز در \lr{CECM} نیز بارگذاری کنید.
                    \item
                        هدف این تمرین یادگیری شماست. لطفاً تمرین را خودتان انجام دهید. در صورت کشف تقلب مطابق قوانین درس با آن برخورد خواهد شد.
        \end{itemize}
\end{document}
