\documentclass{utap}

\usepackage{wrapfig}
\usepackage{verbatim}
\usepackage{fancyvrb}
\usepackage{lscape}
\usepackage{rotating}
\usepackage{xepersian}

\title{تمرین شماره‌ی ۷\normalsize\qquad فاز دوم}
\author{%
    \href{mailto:zangenehsaeed412@gmail.com?subject=[AP\%20S98\%20A7]\%20}{سعید زنگنه},
    \href{mailto:naghavi.pooya@gmail.com?subject=[AP\%20S98\%20A7]\%20}{پویا نقوی},
    \href{mailto:bardia.eghbali@gmail.com?subject=[AP\%20S98\%20A7]\%20}{بردیا اقبالی},
    \href{mailto:ahhabibvand@gmail.com?subject=[AP\%20S98\%20A7]\%20}{امیرحسین حبیب‌وند},
    \href{mailto:farzadhabibii98@gmail.com?subject=[AP\%20S98\%20A7]\%20}{فرزاد حبیبی}
}
\course{برنامه‌سازی پیشرفته}
\lecturer{رامتین خسروی}
\deadline{شنبه ۴ خرداد ۱۳۹۸، ساعت ۲۳:۵۵}
\graphicspath{{./img/}}

\lstdefinelanguage{zabanche}{
    morekeywords={run}
}
\lstdefinelanguage{diff}{
    morecomment=[f][\color{Black}]{---},
    morecomment=[f][\color{Red}]<,
    morecomment=[f][\color{Green}]>,
    identifierstyle=\color{Cyan},
    basicstyle=\small\ttfamily\color{Cyan},
}

\begin{document}
    \maketitle

    \section{مقدمه}

    در فاز اول پروژه شما به پیاده‌سازی یک شبکه‌ی مجازی پرداختید و دستورهایی را که با استفاده از رابط کاربری خط فرمان\LTRfootnote{command line} به برنامه داده می‌شد پیاده‌سازی کردید.

    سیستم‌های پیشنهادگر\LTRfootnote{recommender system} امروزه جزء مهمی از سیستم‌های تجارت الکترونیک را تشکیل می‌دهند که به کمک آن‌ها می‌توان روی علایق مشتریان مانور داد و به این ترتیب باعث افزایش رضایت آن‌ها شد. این سیستم‌ها با بررسی رفتار مخاطب که از علایق و سلیقه‌های او سرچشمه گرفته است، پیشنهاد‌های دیگری متناسب با آن‌ها به او ارائه می‌دهند. این موضوع باعث افزایش رضایت و جلب توجه بیشتر او می‌شود.
    طراحی یک پیشنهاد‌گر خوب نیازمند به کارگیری روش‌های پیشرفته‌ای در هوش مصنوعی\LTRfootnote{Artificial Intelligence (AI)} است که بتواند بر اساس شباهت‌ بین کالاها وسوابق استفاده‌ی مشتریان از آن‌ها بهترین پیشنهاد‌ها را ارائه نماید.

    در این تمرین می‌خواهیم علاوه بر کامل~کردن دستورهایی که در فاز اول پیاده‌سازی کردید، روشی بیان کنیم که بتوانیم به~طور منحصر به فرد برای هر فیلم، فیلم‌هایی را پیشنهاد دهیم که بیشترین شباهت را به آن باشد.

    \section{شرح تمرین}

    در این قسمت ابتدا تغییراتی در برخی دستورهای فاز قبل ایجاد می‌کنیم.
    در مرحله‌ی بعد به کامل~کردن دستورهایی می‌پردازیم که در فاز اول تعدادی از آن‌ها را پیاده‌سازی کردید. این دستورها نیز مانند دستورهای فاز اول پس از اجرا شدن دارای خروجی مشخصی هستند که منحصراً ذکر می‌شود.
    در ادامه به سراغ طراحی یک سیستم پیشنهادگر فیلم پیشرفته‌تر می‌پردازیم.
    دقت کنید که خروجی‌های شما به صورت \textbf{خودکار} آزموده می‌شوند؛ لذا خروجی شما باید دقیقاً همانند خروجی خواسته شده باشد، در غیر این صورت نمره‌ی بخش آزمون\LTRfootnote{test} را از دست خواهید داد.

    \subsection{تغییرات دستورها}

    در ساختار ورودی گرفتن چند دستوری که در فاز یک پیاده‌سازی کردید، تغییراتی باید رخ دهد که در زیر به آن‌ها می‌پردازیم.

    \subsubsection{ویرایش اطلاعات فیلم}

    در دستور \textit{ویرایش اطلاعات فیلم} (با شماره‌ی ۳.۳.۲) باید به‌ جای متد \lr{\texttt{PUT}} از متد \lr{\texttt{POST}} استفاده کنید و به‌ جای کلمه‌ی \lr{\texttt{films}} کلمه‌ی \lr{\texttt{put\_films}} را قرار دهید.
    \begin{latin}
        \scriptsize
        \begin{Verbatim}[frame=lines,label={\rl{دستور ورودی}}]
POST put_films ? film_id <film_id> [name <name>] [year <year>] [length <length>] [summary <summary>] [director <director>]
        \end{Verbatim}
    \end{latin}

    \subsubsection{حذف فیلم}

    در دستور \textit{حذف فیلم} (با شماره‌ی ۳.۳.۳) باید به جای متد \lr{\texttt{DELETE}} از متد \lr{\texttt{POST}} استفاده کنید و به جای کلمه‌ی \lr{\texttt{films}} کلمه‌ی \lr{\texttt{delete\_film}} را قرار دهید.
    \begin{latin}
        \scriptsize
        \begin{Verbatim}[frame=lines,label={\rl{دستور ورودی}}]
POST delete_films ? film_id <film_id>
        \end{Verbatim}
    \end{latin}

    \subsubsection{حذف~کردن نظرات}

    در دستور \textit{حذف~کردن نظرات} (با شماره‌ی ۳.۳.۸) باید به جای متد \lr{\texttt{DELETE}} از متد \lr{\texttt{POST}} استفاده کنید و به جای کلمه‌ی \lr{\texttt{comments}} کلمه‌ی \lr{\texttt{delete\_comments}} را قرار دهید.
    \begin{latin}
        \scriptsize
        \begin{Verbatim}[frame=lines,label={\rl{دستور ورودی}}]
POST delete_comments ? film_id <film_id> comment_id <comment_id>
        \end{Verbatim}
    \end{latin}

    \subsection{دستورهای کمکی}

    \subsubsection{خروج}

    با این دستور افراد می‌توانند از سامانه خارج شوند. توجه کنید که این دستور فقط در حالتی که کاربری در سامانه وارد شده باشد قابل اجرا است و در غیر این صورت باید خطای درخواست اشتباه\LTRfootnote{\texttt{Bad Request}} چاپ شود.

    از این پس دو دستور ورود و ثبت‌نام فقط در زمانی که کاربری در سیستم وارد نشده است قابل اجرااند و در بقیه‌ی مواقع باید خطای درخواست اشتباه در خروجی چاپ شود.

    \begin{latin}
        \begin{Verbatim}[frame=lines,label={\rl{دستور ورودی}}]
POST logout
        \end{Verbatim}
        \begin{Verbatim}[frame=lines,label={\rl{خروجی}}]
OK
        \end{Verbatim}
    \end{latin}

    \subsubsection{نمایش پول}

    هر کاربر می‌تواند با دستور زیر میزان دارایی خود را در شبکه مشاهده کند.

    این دستور از سری دستورهای حوزه‌ی مشتری است.؛ این بدین معنا است که هر کاربری می‌تواند این این دستور را اجرا کند.‌

    \begin{latin}
        \begin{Verbatim}[frame=lines,label={\rl{دستور ورودی}}]
GET money
        \end{Verbatim}
        \begin{Verbatim}[frame=lines,label={\rl{خروجی}}]
100
        \end{Verbatim}
    \end{latin}

    \subsubsection{نمایش پول شبکه‌ی مجازی}

    فرض کنید که کاربری با نام کاربری \lr{admin} و رمز عبور \lr{admin} همواره در سامانه عضو است و نیازی به ثبت‌نام ندارد. در صورتی که کاربری با این مشخصات به سامانه وارد شد، با دستور زیر می‌تواند مقدار پول کل سامانه را مشاهده کند.

    فرض کنید این کاربر هیچ دستوری را به غیر از این دستور اجرا نمی‌کند و تنها کاری که می‌تواند انجام دهد مشاهده‌ی پول شبکه‌ی مجازی است.

    \begin{latin}
        \begin{Verbatim}[frame=lines,label={\rl{دستور ورودی}}]
GET money
        \end{Verbatim}
        \begin{Verbatim}[frame=lines,label={\rl{خروجی}}]
1000
        \end{Verbatim}
    \end{latin}

    \subsection{پیشنهاد~کردن فیلم}

    در این قسمت می‌خواهیم به پیشنهاد کردن فیلم به کاربر‌ها به صورت منحصر به فرد بپردازیم.

    \subsubsection{گراف فیلم‌ها}

    برای آن ‌که بتوانیم به ازای هر فیلم بهترین فیلم‌هایی را که به آن شباهت دارند به کاربر پیشنهاد دهیم، باید گراف\LTRfootnote{graph} فیلم‌ها را تشکیل دهیم. گراف فیلم‌ها گرافی کامل از تمامی فیلم‌هاست که در آن گره\LTRfootnote{node} متناظر هر فیلم به گره‌های متناظر تمامی فیلم‌های دیگر یال دارد. به این ترتیب تعداد گره‌های این گراف تعداد فیلم‌های موجود در شبکه‌ی مجازی ما می‌شود.

    گراف فیلم‌‌ها گرافی وزن‌دار است که وزن هر یال مشخص کننده‌ی تعداد کاربر‌هایی است که هر دو فیلم دو طرف یال را خریداری  کرده‌اند.

    این گراف به این شکل ساخته می‌شود که در ابتدا گرافی کامل از تمامی فیلم‌ها موجود در شبکه وجود دارد که تمامی یال‌های بین فیلم‌های آن مقدار صفر را دارند. هنگامی که کاربری فیلمی را خریداری می‌کند، عدد تمامی یال‌های بین آن فیلم و فیلم‌های از~پیش~خریداری‌شده یکی اضافه می‌شود. همچنین در هنگام اضافه شدن هر فیلم باید این گراف به‌روز‌رسانی\LTRfootnote{update} شده و یکی به گره‌های آن اضافه شود.

    \subsubsection{پیاده‌سازی گراف فیلم‌ها}

    شما می‌توانید گراف فیلم‌ها را با ماتریس مجاورت پیاده‌سازی کنید. ماتریس مجاورت یک ماتریس دو بعدی از گراف است که هم سطر و هم ستون آن گره‌های گراف هستند و مقداری که در درایه‌ی $\langle i, j\rangle$ قرار می‌گیرد، عدد یالی است که بین گره‌ی $i$ و گره‌ی $j$ کشیده شده است.
    همان‌طور که واضح است تمامی درایه‌های قطر اصلی این ماتریس صفر هستند و این ماتریس یک ماتریس متقارن است.

    \subsubsection{پیشنهاد فیلم}

    در فاز قبل دستوری به نام \textit{مشاهده‌ی جزئیات فیلم} پیاده‌سازی کردید که در انتهای آن ۴ فیلم برتر را که دارای بالاترین امتیاز در میان فیلم‌های شبکه‌ی مجازی بودند به کاربر پیشنهاد می‌کرد. این قسمت در این فاز بهبود می‌یابد و باید این پیشنهادها بر اساس گراف فیلم‌ها صورت گیرد. شما باید در هنگام فراخوانی این دستور بین تمامی یال‌های متصل به گره‌ی آن فیلم، ۴ عدد بزرگ‌تر را انتخاب کنید و فیلمی را که به سر دیگر آن یال متصل است نمایش دهید. اگر عدد یال‌ها در مواردی یکسان بود و شما مجبور به انتخاب بین آن‌ها بودید، ترتیب اضافه‌شدن معیار انتخاب خواهد بود و از بین گزینه‌های برابر قدیمی‌ترین‌ها انتخاب می‌شوند.

    همان‌طور که احتمالاً متوجه شده‌اید، شما با این روش فیلم‌هایی را زیر یک فیلم پیشنهاد می‌دهید که کاربران بیشتری هر دوتای آن‌ها را خریداری کرده‌اند و به عبارت دیگر با یکدیگر بیشترین مشابهت را دارند.
    
    \section{نحوه‌ی تحویل}

    برنامه‌ی خود را با نام \lr{\path{A7-2-SID.zip}} در صفحه‌ی \lr{CECM} درس بارگذاری کنید که \lr{SID} شماره‌ی دانشجویی شماست؛ برای مثال اگر شماره‌ی دانشجویی شما ۸۱۰۱۹۷۹۹۹ باشد، نام پرونده‌ی شما باید \lr{\path{A7-2-810197999.zip}} باشد.

    \begin{itemize}
        \item برنامه‌ی شما باید در سیستم‌عامل لینوکس و با مترجم \lr{g++} با استاندارد \lr{\texttt{c++11}} ترجمه و در زمان معقول برای ورودی‌های آزمون اجرا شود.
        \item لطفاً از روش‌های دیگر فشرده‌سازی مانند \lr{rar} یا \lr{tar.gz} استفاده نکنید.
        \item از صحت قالب\LTRfootnote{format} ورودی‌ها و خروجی‌های برنامه‌ی خود مطمئن شوید.
        \item رعایت سبک برنامه‌نویسی درست و تمیز~بودن برنامه‌ی شما در نمره‌ی تمرین تأثیر زیادی دارد.
        \item هدف این تمرین یادگیری شماست. لطفاً تمرین را خودتان انجام دهید. در صورت کشف تقلب مطابق قوانین درس با آن برخورد خواهد شد.
    \end{itemize}

\end{document}